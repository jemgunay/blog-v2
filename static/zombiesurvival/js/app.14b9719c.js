(function(e){function t(t){for(var a,n,r=t[0],d=t[1],h=t[2],l=0,m=[];l<r.length;l++)n=r[l],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&m.push(o[n][0]),o[n]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(e[a]=d[a]);p&&p(t);while(m.length)m.shift()();return s.push.apply(s,h||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,r=1;r<i.length;r++){var d=i[r];0!==o[d]&&(a=!1)}a&&(s.splice(t--,1),e=n(n.s=i[0]))}return e}var a={},o={app:0},s=[];function n(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=a,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=t,r=r.slice();for(var h=0;h<r.length;h++)t(r[h]);var p=d;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"3ea0":function(e,t,i){},5327:function(e,t,i){"use strict";i("3ea0")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("7a23");function o(e,t,i,o,s,n){var r=Object(a["g"])("Game");return Object(a["d"])(),Object(a["b"])(r)}var s=Object(a["h"])("data-v-5e1dd4d8");Object(a["f"])("data-v-5e1dd4d8");var n={id:"container"},r=Object(a["c"])('<p id="loading-text" data-v-5e1dd4d8></p><div id="game" data-v-5e1dd4d8></div><div id="controls" data-v-5e1dd4d8><div class="control-pane" data-v-5e1dd4d8><p data-v-5e1dd4d8>Move - WASD</p><p data-v-5e1dd4d8>Reload - R</p><p data-v-5e1dd4d8><a href="https://github.com/jemgunay/zombiesurvival" target="_blank" data-v-5e1dd4d8>GitHub</a></p></div><div class="control-pane" id="control-pane-right" data-v-5e1dd4d8><p data-v-5e1dd4d8>Q - Previous Weapon</p><p data-v-5e1dd4d8>E - Next Weapon</p><p data-v-5e1dd4d8>1/2/3 - Switch Weapon</p></div></div>',3);Object(a["e"])();var d=s((function(e,t,i,o,s,d){return Object(a["d"])(),Object(a["b"])("div",n,[r])})),h=(i("38cf"),i("22a2")),p=(i("a434"),i("b0c0"),i("b64b"),i("18a5"),i("b85c")),l=i("d4ec"),m=i("bee2"),u=i("257e"),c=i("262e"),_=i("2caf"),g="A",f="D",b="W",y="S",v="R",w="Q",x="E",j="1",z="2",C="3",T="4",S="5",k="ARROWLEFT",O="ARROWRIGHT",q="ARROWUP",M="ARROWDOWN",D={};function P(e){return void 0===D[e]&&(D[e]=!1),D[e]}var I={x:0,y:0},L=!1;function W(){return L}function F(){return I}function A(e){window.addEventListener("keydown",(function(e){D[e.key.toUpperCase()]=!0}),!1),window.addEventListener("keyup",(function(e){D[e.key.toUpperCase()]=!1}),!1),e.on("mousedown",(function(){L=!0})).on("pointerdown",(function(){L=!0})).on("mouseup",(function(){L=!1})).on("pointerup",(function(){L=!1})),e.on("mousemove",(function(e){I.x=e.data.global.x,I.y=e.data.global.y}))}var N=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(e){var a;return Object(l["a"])(this,i),a=t.call(this),a.radius=e,a}return Object(m["a"])(i,[{key:"angleBetween",value:function(e){return Math.atan2(e.y-this.position.y,e.x-this.position.x)}},{key:"angleBetweenGlobal",value:function(e){var t=this.getGlobalPosition();return Math.atan2(e.y-t.y,e.x-t.x)}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.position.x-e.x,2)+Math.pow(this.position.y-e.y,2))}},{key:"hitTestRect",value:function(e){e.centerX=e.x+e.width/2,e.centerY=e.y+e.height/2,this.centerX=this.x+this.width/2,this.centerY=this.y+this.height/2,e.halfWidth=e.width/2,e.halfHeight=e.height/2,this.halfWidth=this.width/2,this.halfHeight=this.height/2;var t=e.centerX-this.centerX,i=e.centerY-this.centerY,a=e.halfWidth+this.halfWidth,o=e.halfHeight+this.halfHeight;return Math.abs(t)<a&&Math.abs(i)<o}},{key:"hitTestCircle",value:function(e){var t=this.distanceTo(e.position),i=e.radius+this.radius;return t<=i}},{key:"debugDraw",value:function(e){void 0===this.debugCircle&&(this.debugCircle=new h["d"],this.debugCircle.beginFill(10053375),this.debugCircle.drawCircle(0,0,this.radius),this.debugCircle.endFill(),e.addChild(this.debugCircle)),this.debugCircle.position.x=this.position.x,this.debugCircle.position.y=this.position.y}}]),i}(h["c"]);i("f7fd");function R(e){h["e"].shared.add("player","game/images/sprite_sheets/player.json").add("normal_zombie_head_brunette","game/images/sprite_sheets/normal_zombie_head_brunette.json").add("normal_zombie_head_blonde","game/images/sprite_sheets/normal_zombie_head_blonde.json").add("normal_zombie_head_ginger","game/images/sprite_sheets/normal_zombie_head_ginger.json").add("normal_zombie_torso_blue","game/images/sprite_sheets/normal_zombie_torso_blue.json").add("normal_zombie_torso_green","game/images/sprite_sheets/normal_zombie_torso_green.json").add("normal_zombie_torso_orange","game/images/sprite_sheets/normal_zombie_torso_orange.json").add("normal_zombie_torso_purple","game/images/sprite_sheets/normal_zombie_torso_purple.json").add("normal_zombie_torso_grey","game/images/sprite_sheets/normal_zombie_torso_grey.json").add("normal_zombie_torso_red","game/images/sprite_sheets/normal_zombie_torso_red.json").add("normal_zombie_arms","game/images/sprite_sheets/normal_zombie_arms.json").add("normal_zombie_legs","game/images/sprite_sheets/normal_zombie_legs.json").add("grass","game/images/grass.jpg").add("directional_blood_splat","game/images/directional_blood_splat.png").add("downward_blood_splat","game/images/downward_blood_splat.png").add("farm_border_top","game/images/farm_border_top.png").add("farm_border_bottom","game/images/farm_border_bottom.png").add("normal_zombie_gib_1","game/images/gibs/normal_zombie_gib_1.png").add("normal_zombie_gib_2","game/images/gibs/normal_zombie_gib_2.png").add("normal_zombie_gib_3","game/images/gibs/normal_zombie_gib_3.png").add("normal_zombie_gib_4","game/images/gibs/normal_zombie_gib_4.png").add("normal_zombie_gib_5","game/images/gibs/normal_zombie_gib_5.png").add("normal_zombie_gib_6","game/images/gibs/normal_zombie_gib_6.png").add("normal_zombie_gib_7","game/images/gibs/normal_zombie_gib_7.png").add("pistol_ammo","game/images/ammo/pistol_ammo.png").add("rifle_ammo","game/images/ammo/rifle_ammo.png").add("shotgun_ammo","game/images/ammo/shotgun_ammo.png").add("1911_pistol_shoot_1","game/sounds/1911_pistol/1911_pistol_shot_1.wav").add("1911_pistol_shoot_2","game/sounds/1911_pistol/1911_pistol_shot_2.wav").add("1911_pistol_reload","game/sounds/1911_pistol/pistol_reload.mp3").add("pistol_empty","game/sounds/1911_pistol/pistol_dryfire.wav").add("g3_rifle_shoot_1","game/sounds/g3_rifle/g3_rifle_shot_1.wav").add("g3_rifle_shoot_2","game/sounds/g3_rifle/g3_rifle_shot_2.wav").add("g3_rifle_reload","game/sounds/g3_rifle/rifle_reload.mp3").add("rifle_empty","game/sounds/g3_rifle/rifle_dryfire.wav").add("spas_12_shotgun_shoot_1","game/sounds/spas_12_shotgun/spas_12_shotgun_shot_1.wav").add("spas_12_shotgun_shoot_2","game/sounds/spas_12_shotgun/spas_12_shotgun_shot_2.wav").add("spas_12_shotgun_insert_shell","game/sounds/spas_12_shotgun/spas_12_shotgun_insert_shell.wav").add("change_weapon","game/sounds/change_weapon.wav").add("ammo_pickup","game/sounds/ammo_pickup.wav").add("flesh_impact_1","game/sounds/flesh_impact/blt_imp_flesh_lyr_plr_10.wav").add("flesh_impact_2","game/sounds/flesh_impact/blt_imp_flesh_plr_04.wav").add("flesh_impact_3","game/sounds/flesh_impact/blt_imp_flesh_plr_05.wav").add("flesh_impact_4","game/sounds/flesh_impact/blt_imp_flesh_plr_11.wav").add("flesh_impact_5","game/sounds/flesh_impact/bullet_flesh_head_npc_02.wav").add("flesh_impact_6","game/sounds/flesh_impact/bullet_flesh_head_npc_03.wav").add("flesh_impact_7","game/sounds/flesh_impact/bullet_flesh_head_npc_04.wav").add("flesh_impact_8","game/sounds/flesh_impact/bullet_flesh_head_npc_05.wav").add("flesh_explode_1","game/sounds/flesh_explode/gib_body_explode_01.wav").add("flesh_explode_2","game/sounds/flesh_explode/gib_body_explode_02.wav").add("flesh_explode_3","game/sounds/flesh_explode/gib_body_explode_03.wav").add("flesh_explode_4","game/sounds/flesh_explode/gib_body_explode_09.wav").add("walk_grass_1","game/sounds/walk_grass/step_sprint_grass_short_r_01.wav").add("walk_grass_2","game/sounds/walk_grass/step_sprint_grass_short_r_02.wav").add("walk_grass_3","game/sounds/walk_grass/step_sprint_grass_short_r_03.wav").load((function(){H("player",5),H("normal_zombie_head_brunette",19),H("normal_zombie_head_blonde",19),H("normal_zombie_head_ginger",19),H("normal_zombie_torso_blue",19),H("normal_zombie_torso_green",19),H("normal_zombie_torso_orange",19),H("normal_zombie_torso_purple",19),H("normal_zombie_torso_grey",19),H("normal_zombie_torso_red",19),H("normal_zombie_arms",19),H("normal_zombie_legs",33),e()}))}var G={};function H(e,t){for(var i=[],a="",o=0;o<t;o++)a=o>99?"0".concat(o):o>9?"00".concat(o):"000".concat(o),i.push(h["i"].from(e+a));G[e]=i}function B(e){return h["k"].TextureCache[e]}function E(e){return new h["f"](h["k"].TextureCache[e])}function K(e){if(e in G)return G[e];console.error("frames not generated for "+e)}function X(e){h["e"].shared.resources[e].sound.play()}function Y(e){return e*Math.PI/180}function U(e,t){return Math.floor(Math.random()*(t-e+1))+e}function J(){return 0===U(0,1)}function Q(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),a=[e[i],e[t]];e[t]=a[0],e[i]=a[1]}return e}var Z="semi",V="auto",$="clip",ee="shell",te="idle",ie="shooting",ae="empty_barrel",oe="empty_clip",se="reloading",ne="pistol_ammo",re="rifle_ammo",de="shotgun_ammo",he=function(){function e(){Object(l["a"])(this,e),this.ammo={},this.ammo[ne]={name:ne,count:40,ammoDropSize:10,projectileSpeed:16,projectileDamage:40,spriteName:"pistol_ammo"},this.ammo[re]={name:re,count:60,ammoDropSize:30,projectileSpeed:18,projectileDamage:34,spriteName:"rifle_ammo"},this.ammo[de]={name:de,count:4,ammoDropSize:8,projectileSpeed:16,projectileDamage:22,spriteName:"shotgun_ammo"},this.weapons=[],this.equipped=null,this.equippedIndex=null,this.switching=!1}return Object(m["a"])(e,[{key:"addWeapon",value:function(e){this.weapons.push(e),this.equipped||this.equip(0)}},{key:"equip",value:function(e){var t=this;e>this.weapons.length-1||this.switching||null!==this.equipped&&this.equipped.state!==te||this.equippedIndex!==e&&(this.equippedIndex=e,this.equipped=this.weapons[e],X("change_weapon"),this.switching=!0,setTimeout((function(){t.switching=!1}),500))}},{key:"equipPrevious",value:function(){0!==this.equippedIndex?this.equip(this.equippedIndex-1):this.equip(this.weapons.length-1)}},{key:"equipNext",value:function(){this.equippedIndex!==this.weapons.length-1?this.equip(this.equippedIndex+1):this.equip(0)}}]),e}(),pe=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(e,a,o){var s;return Object(l["a"])(this,i),s=t.call(this,B(o.spriteName)),s.anchor.set(.5,.5),s.scale.set(.7),s.radius=10,s.position.set(e,a),s.rotation=Y(U(0,360)),s.ammoType=o,s}return i}(h["f"]),le=function e(t){Object(l["a"])(this,e),this.name="",this.trigger="",this.shootDuration=0,this.reloadDuration=0,this.reloadType="",this.ammoCapacity=0,this.ammoLoaded=0,this.projectilesPerShot=0,this.spread=0,this.offsetDist=0,this.offsetAngle=0,this.ammoType=null,this.idleFrame=0,this.shootFrame=0,this.state=te,this.attackSounds=[],this.reloadSound="",this.emptySound="",t.ammoLoaded||(this.ammoLoaded=t.ammoCapacity),Object.assign(this,t)},me=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(){return Object(l["a"])(this,i),t.call(this,{name:"1911",trigger:Z,shootDuration:190,reloadDuration:1700,reloadType:$,ammoCapacity:10,projectilesPerShot:1,spread:1,offsetDist:25,offsetAngle:7,ammoType:ne,idleFrame:1,shootFrame:2,attackSounds:["1911_pistol_shoot_1","1911_pistol_shoot_2"],reloadSound:"1911_pistol_reload",emptySound:"pistol_empty"})}return i}(le),ue=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(){return Object(l["a"])(this,i),t.call(this,{name:"G3",trigger:V,shootDuration:150,reloadDuration:2e3,reloadType:$,ammoCapacity:30,projectilesPerShot:1,spread:3,offsetDist:45,offsetAngle:20,ammoType:re,idleFrame:3,shootFrame:4,attackSounds:["g3_rifle_shoot_1","g3_rifle_shoot_2"],reloadSound:"g3_rifle_reload",emptySound:"rifle_empty"})}return i}(le),ce=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(){return Object(l["a"])(this,i),t.call(this,{name:"SPAS-12",trigger:Z,shootDuration:800,reloadDuration:600,reloadType:ee,ammoCapacity:8,projectilesPerShot:12,spread:18,offsetDist:45,offsetAngle:0,ammoType:de,idleFrame:1,shootFrame:2,attackSounds:["spas_12_shotgun_shoot_1","spas_12_shotgun_shoot_2"],reloadSound:"spas_12_shotgun_insert_shell",emptySound:"rifle_empty"})}return i}(le),_e=(i("4de4"),function(){function e(t){Object(l["a"])(this,e),this.container=t,this.projectiles=[],this.currentID=0}return Object(m["a"])(e,[{key:"push",value:function(e){var t=this;e.id=this.currentID,this.currentID++,this.projectiles.push(e),this.container.addChild(e),e.timeout=setTimeout((function(){t.drop(e)}),5e3)}},{key:"drop",value:function(e){clearTimeout(e.timeout),this.container.removeChild(e),this.projectiles=this.projectiles.filter((function(t){return t.id!==e.id}))}}]),e}()),ge=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(e,a,o,s,n){var r;return Object(l["a"])(this,i),r=t.call(this),r.damage=s,r.radius=2,r.beginFill(1644825),r.drawCircle(0,0,r.radius),r.endFill(),r.position.set(e,a),r.vx=Math.cos(o)*n,r.vy=Math.sin(o)*n,r}return Object(m["a"])(i,[{key:"step",value:function(e){this.x+=this.vx*e,this.y+=this.vy*e}}]),i}(h["d"]),fe=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(e,a){var o;Object(l["a"])(this,i),o=t.call(this,18);var s=new h["a"](K("player"));return s.anchor.set(.5),s.scale.set(.8),s.animationSpeed=.5,o.sprite=s,o.position.set(e,a),o.rotation=1.5*Math.PI,o.speed=1.2,o.alive=!0,o.playingWalkingSound=!1,o.armoury=new he,o.armoury.addWeapon(new me),o.armoury.addWeapon(new ue),o.armoury.addWeapon(new ce),o.addChild(s),o}return Object(m["a"])(i,[{key:"step",value:function(e){var t=this;if(ke.ui.setAmmoText(this.armoury.equipped.name,this.armoury.equipped.ammoLoaded,this.armoury.ammo[this.armoury.equipped.ammoType].count),!1!==this.alive){var i=0,a=0;(P(g)||P(k))&&this.position.x>-95?i=-1:(P(f)||P(O))&&this.position.x<818&&(i=1),(P(b)||P(q))&&this.position.y>-145?a=-1:(P(y)||P(M))&&this.position.y<640&&(a=1),0===i&&0===a||this.playingWalkingSound||(this.playingWalkingSound=!0,X("walk_grass_"+U(1,3)),setTimeout((function(){t.playingWalkingSound=!1}),450)),this.position.set(this.position.x+i*e*this.speed,this.position.y+a*e*this.speed);var o=F();this.rotation=this.angleBetweenGlobal(o),P(j)?this.armoury.equip(0):P(z)?this.armoury.equip(1):P(C)?this.armoury.equip(2):P(T)?this.armoury.equip(3):P(S)?this.armoury.equip(4):P(w)?this.armoury.equipPrevious():P(x)&&this.armoury.equipNext(),this.armoury.equipped.state===te&&this.sprite.gotoAndStop(this.armoury.equipped.idleFrame),P(v)&&this.reload(),W()||this.armoury.equipped.state!==ae||(this.armoury.equipped.state=te)}}},{key:"attack",value:function(){var e=this;if(this.armoury.equipped.state!==te||!0===this.armoury.switching)return[];if(0===this.armoury.equipped.ammoLoaded)return this.armoury.equipped.state=oe,""!==this.armoury.equipped.emptySound&&X(this.armoury.equipped.emptySound),setTimeout((function(){e.alive&&e.armoury.equipped.state===oe&&(e.armoury.equipped.state=te)}),this.armoury.equipped.shootDuration),[];if(this.armoury.equipped.state=ie,this.sprite.gotoAndStop(this.armoury.equipped.shootFrame),this.armoury.equipped.ammoLoaded--,this.armoury.equipped.attackSounds.length>0){var t=U(0,this.armoury.equipped.attackSounds.length-1),i=this.armoury.equipped.attackSounds[t];X(i)}setTimeout((function(){e.alive&&e.sprite.gotoAndStop(e.armoury.equipped.idleFrame)}),100),setTimeout((function(){e.armoury.equipped.trigger!==Z?e.armoury.equipped.state=te:e.armoury.equipped.state=ae}),this.armoury.equipped.shootDuration);for(var a=[],o=0;o<this.armoury.equipped.projectilesPerShot;o++){var s=U(0,this.armoury.equipped.spread);J()&&(s*=-1);var n=this.rotation+Y(this.armoury.equipped.offsetAngle),r={x:this.position.x+Math.cos(n)*this.armoury.equipped.offsetDist,y:this.position.y+Math.sin(n)*this.armoury.equipped.offsetDist},d=new ge(r.x,r.y,this.rotation+Y(s),this.armoury.ammo[this.armoury.equipped.ammoType].projectileDamage,this.armoury.ammo[this.armoury.equipped.ammoType].projectileSpeed);a.push(d)}return a}},{key:"reload",value:function(){var e=this;if(this.armoury.equipped.state===te&&this.armoury.equipped.ammoLoaded!==this.armoury.equipped.ammoCapacity&&0!==this.armoury.ammo[this.armoury.equipped.ammoType].count){this.armoury.equipped.state=se;var t=1;if(this.armoury.equipped.reloadType===$){var i=this.armoury.equipped.ammoCapacity-this.armoury.equipped.ammoLoaded;t=this.armoury.ammo[this.armoury.equipped.ammoType].count>=i?i:this.armoury.ammo[this.armoury.equipped.ammoType].count}X(this.armoury.equipped.reloadSound),setTimeout((function(){e.armoury.ammo[e.armoury.equipped.ammoType].count-=t,e.armoury.equipped.ammoLoaded+=t,e.armoury.equipped.state=te}),this.armoury.equipped.reloadDuration)}}},{key:"die",value:function(){this.alive&&(X("flesh_explode_"+U(1,4)),this.alive=!1,this.sprite.gotoAndStop(0))}}]),i}(N),be=function(){function e(){Object(l["a"])(this,e),this.levels=[{zombieCount:7,spawnTime:{min:1300,max:1800},zombieSpeed:.6},{zombieCount:12,spawnTime:{min:900,max:1400},zombieSpeed:.7},{zombieCount:25,spawnTime:{min:800,max:1100},zombieSpeed:.7},{zombieCount:35,spawnTime:{min:750,max:900},zombieSpeed:.8},{zombieCount:15,spawnTime:{min:1e3,max:1300},zombieSpeed:1.4},{zombieCount:40,spawnTime:{min:750,max:1200},zombieSpeed:.9},{zombieCount:50,spawnTime:{min:600,max:700},zombieSpeed:1},{zombieCount:60,spawnTime:{min:400,max:600},zombieSpeed:1.2},{zombieCount:30,spawnTime:{min:1e3,max:1300},zombieSpeed:1.4}],this.currentLevelNum=0}return Object(m["a"])(e,[{key:"next",value:function(){this.currentLevelNum!==this.levels.length&&(this.currentLevelNum++,this.currentLevel=this.levels[this.currentLevelNum-1],ke.ui.setRoundText(this.currentLevelNum),this.tick())}},{key:"tick",value:function(){var e=this;setTimeout((function(){e.currentLevel.zombieCount--,e.readyToSpawn=!0}),U(this.currentLevel.spawnTime.min,this.currentLevel.spawnTime.max))}},{key:"shouldSpawn",value:function(){return!!this.readyToSpawn&&(this.readyToSpawn=!1,this.currentLevel.zombieCount>0&&this.tick(),!0)}}]),e}(),ye=["blue","green","orange","purple","grey","red"],ve=["brunette","blonde","ginger"],we=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(e,a,o,s){var n;Object(l["a"])(this,i),n=t.call(this,20);var r=new h["a"](K("normal_zombie_legs"));r.anchor.set(.5,.55),r.angle=90,r.play(),n.addChild(r);var d=new h["a"](K("normal_zombie_arms"));d.anchor.set(.5,.92),d.angle=90,d.play(),n.addChild(d);var p=ye[U(0,ye.length-1)],m=new h["a"](K("normal_zombie_torso_"+p));m.anchor.set(.5),m.angle=90,m.play(),n.addChild(m);var u=ve[U(0,ve.length-1)],c=new h["a"](K("normal_zombie_head_"+u));return c.anchor.set(.53,.5),c.angle=90,c.play(),n.addChild(c),n.position.set(e,a),n.scale.set(1.25),J()&&(n.scale.y*=-1),n.rotation=o,n.speed=0,n.rotSpeed=.05,n.acceleration=.02,n.maxSpeed=s,n.setNormalSpeed(),n.health=100,n}return Object(m["a"])(i,[{key:"setNormalSpeed",value:function(){this.targetSpeed=this.maxSpeed,this.children[0].animationSpeed=.6*this.targetSpeed;for(var e=1;e<this.children.length;e++)this.children[e].animationSpeed=.4*this.targetSpeed}},{key:"setSlowSpeed",value:function(){this.targetSpeed=this.maxSpeed/3,this.children[0].animationSpeed=.6*this.targetSpeed;for(var e=1;e<this.children.length;e++)this.children[e].animationSpeed=.4*this.targetSpeed}},{key:"setTargetFunc",value:function(e){this.targetFunc=e}},{key:"step",value:function(e){var t=this.targetFunc();this.distToPlayer=this.distanceTo(t);var i=this.angleBetween(t)-this.rotation;i<-Math.PI?i+=2*Math.PI:i>Math.PI&&(i-=2*Math.PI),this.rotation+=i*e*this.rotSpeed,this.speed<this.targetSpeed?this.speed+=this.acceleration:this.speed>this.targetSpeed&&(this.speed-=this.acceleration),this.position.x+=Math.sin(this.rotation+Math.PI/2)*this.speed*e,this.position.y+=Math.cos(this.rotation-Math.PI/2)*this.speed*e}},{key:"applyDamage",value:function(e){return this.health-=e,this.health<=0}}]),i}(N);function xe(e,t,i){var a=E("directional_blood_splat");return a.anchor.set(.5,.6),a.position.set(e,t),a.rotation=i-Math.PI/2,a.scale.set(.35+Math.random()/10),a.alpha=.6,J()&&(a.scale.x*=-1),a}function je(e,t){var i=E("downward_blood_splat");return i.anchor.set(.5),i.position.set(e,t),i.rotation=Y(U(0,360)),i.scale.set(.1+Math.random()/10),i.alpha=.6,i}var ze=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(e){var a;Object(l["a"])(this,i),a=t.call(this),a.app=e,a.sortableChildren=!0,a.zombies=[],a.projectileManager=new _e(Object(u["a"])(a));var o=new h["j"](B("grass"),4*e.screen.width,4*e.screen.height);o.anchor.set(.25),o.position.set(-e.screen.width/2,-e.screen.height/2),a.addChild(o);var s=E("farm_border_bottom");s.anchor.set(.18,.25),s.position.set(-e.screen.width/2,-e.screen.height/2),a.addChild(s),a.bloodContainer=new h["c"],a.addChild(a.bloodContainer),a.gibs=[],a.ammoDropContainer=new h["c"],a.addChild(a.ammoDropContainer),a.player=new fe(e.screen.width/2,e.screen.height/2),a.addChild(a.player),a.zombieContainer=new h["c"],a.addChild(a.zombieContainer);var n=E("farm_border_top");return n.anchor.set(.18,.25),n.position.set(-e.screen.width/2,-e.screen.height/2),a.addChild(n),a.levelManager=new be,a.levelManager.next(),e.ticker.add((function(e){a.step(e)})),a}return Object(m["a"])(i,[{key:"step",value:function(e){this.levelManager.shouldSpawn()&&this.spawnZombie(),0===this.levelManager.currentLevel.zombieCount&&0===this.zombies.length&&this.levelManager.next(),this.zombies.sort((function(e,t){return e.distToPlayer-t.distToPlayer}));for(var t=this.zombies.length-1;t>=0;t--)this.zombies[t].step(e),this.zombies[t].setNormalSpeed(),t>0&&this.zombies[t].hitTestCircle(this.zombies[t-1])&&this.zombies[t].setSlowSpeed(),this.player.alive&&this.player.hitTestCircle(this.zombies[t])&&this.endGame();this.player.step(e);var i=this.player.getGlobalPosition(),a={x:.05*Math.abs(i.x-this.app.screen.width/2),y:.05*Math.abs(i.y-this.app.screen.height/2)};a.x<.05&&(a.x=0),a.y<.05&&(a.y=0),i.x<this.app.screen.width/2?this.x+=a.x:i.x>this.app.screen.width/2&&(this.x-=a.x),i.y<this.app.screen.height/2?this.y+=a.y:i.y>this.app.screen.height/2&&(this.y-=a.y);for(var o=0;o<this.ammoDropContainer.children.length;o++){var s=this.ammoDropContainer.children[o];this.player.alive&&this.player.hitTestCircle(s)&&(this.player.armoury.ammo[s.ammoType.name].count+=s.ammoType.ammoDropSize,X("ammo_pickup"),this.ammoDropContainer.removeChild(s))}if(W()&&this.player.alive){var n,r=this.player.attack(),d=Object(p["a"])(r);try{for(d.s();!(n=d.n()).done;){var h=n.value;this.projectileManager.push(h)}}catch(O){d.e(O)}finally{d.f()}}for(var l=this.projectileManager.projectiles.length-1;l>=0;l--){var m=this.projectileManager.projectiles[l];m.step(e);for(var u=this.zombies.length-1;u>=0;u--)if(this.zombies[u].hitTestCircle(m)){var c=this.zombies[u];if(c.applyDamage(m.damage)){X("flesh_explode_"+U(1,4));var _=new xe(c.x,c.y,c.rotation);if(this.bloodContainer.addChild(_),1===U(1,6)){var g=Object.keys(this.player.armoury.ammo),f=g[U(0,g.length-1)],b=this.player.armoury.ammo[f],y=new pe(c.x,c.y,b);this.ammoDropContainer.addChild(y)}for(var v=Q([1,2,3,4,5,6,7]),w=0;w<3;w++){var x=E("normal_zombie_gib_"+v[w]);x.position.set(c.x,c.y),x.scale.set(1.5),x.anchor.set(.5),x.speed=U(4,12),x.rotDir=1;var j=Y(U(0,40));J()&&(j*=-1,x.rotDir=-1);var z=c.rotation+Math.PI+j;x.yv=Math.sin(z),x.xv=Math.cos(z),this.gibs.push(x),this.bloodContainer.addChild(x)}this.zombieContainer.removeChild(c),this.zombies.splice(u,1),ke.ui.incrementKillCounter()}else{X("flesh_impact_"+U(1,8));var C=new je(this.zombies[u].x,this.zombies[u].y);this.bloodContainer.addChild(C)}this.projectileManager.drop(m);break}}var T,S=Object(p["a"])(this.gibs);try{for(S.s();!(T=S.n()).done;){var k=T.value;0!==k.speed&&(k.x+=k.xv*k.speed*e,k.y+=k.yv*k.speed*e,k.rotation+=k.speed/20*k.rotDir,k.speed*=.9,k.speed<=.05&&(k.speed=0))}}catch(O){S.e(O)}finally{S.f()}}},{key:"spawnZombie",value:function(){var e=this,t=Y(U(0,360)),i={x:this.player.position.x+450*Math.cos(t),y:this.player.position.y+450*Math.sin(t)},a=this.player.angleBetween(i)+Math.PI,o=new we(i.x,i.y,a,this.levelManager.currentLevel.zombieSpeed);if(this.player.alive)o.setTargetFunc((function(){return e.player.position}));else{var s=this.randomPositionOffScreen();o.setTargetFunc((function(){return s}))}this.zombies.push(o),this.zombieContainer.addChild(o)}},{key:"endGame",value:function(){var e=this;this.player.die();var t,i=Object(p["a"])(this.zombies);try{var a=function(){var i=t.value,a=e.randomPositionOffScreen();i.setTargetFunc((function(){return a}))};for(i.s();!(t=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}},{key:"randomPositionOffScreen",value:function(){var e=Y(U(0,360));return{x:this.player.position.x+1e3*Math.cos(e),y:this.player.position.y+1e3*Math.sin(e)}}}]),i}(h["c"]),Ce={1:"st",2:"nd",3:"rd",4:"th",5:"th",6:"th",7:"th",8:"th",9:"th",10:"th"},Te=function(e){Object(c["a"])(i,e);var t=Object(_["a"])(i);function i(){var e;Object(l["a"])(this,i),e=t.call(this);var a=new h["h"]({fontFamily:"ds-zombie-cyr",fontSize:26,fill:16777215,stroke:"#000000",strokeThickness:5});return e.roundText=new h["g"]("",a),e.roundText.x=20,e.roundText.y=20,e.setRoundText(1),e.addChild(e.roundText),e.weaponText=new h["g"]("",a),e.addChild(e.weaponText),e.ammoText=new h["g"]("",a),e.addChild(e.ammoText),e.killCountText=new h["g"]("",a),e.killCount=-1,e.addChild(e.killCountText),e.incrementKillCounter(),e.zIndex=10,e}return Object(m["a"])(i,[{key:"setRoundText",value:function(e){this.roundText.text=e+Ce[e]+" Wave"}},{key:"incrementKillCounter",value:function(){this.killCount++,1===this.killCount?this.killCountText.text=this.killCount+" Kill":this.killCountText.text=this.killCount+" Kills",this.killCountText.x=ke.app.screen.width-this.killCountText.width-20,this.killCountText.y=20}},{key:"setAmmoText",value:function(e,t,i){this.weaponText.text=e,this.weaponText.x=ke.app.screen.width-this.weaponText.width-20,this.weaponText.y=ke.app.screen.height-this.weaponText.height-60,this.ammoText.text=t+" / "+i,this.ammoText.x=ke.app.screen.width-this.ammoText.width-20,this.ammoText.y=ke.app.screen.height-this.ammoText.height-20}}]),i}(h["c"]),Se=i("27d6"),ke={init:function(e){Se["load"]({custom:{families:["ds-zombie-cyr"],urls:["fonts/ds-zombie-cyr.css"]},active:function(){ke.start(e)}})},start:function(e){var t=this;this.app=new h["b"]({width:e.clientWidth,height:e.clientHeight,transparent:!0,antialias:!0}),e.appendChild(this.app.view),this.app.stage.hitArea=this.app.screen,this.app.stage.interactive=!0,this.app.stage.sortableChildren=!0,R((function(){A(t.app.stage),t.ui=new Te,t.app.stage.addChild(t.ui),t.world=new ze(t.app),t.app.stage.addChild(t.world)}))}},Oe={name:"Game",mounted:function(){var e=document.getElementById("loading-text"),t=0;setInterval((function(){3===t?t=0:t++,e.innerHTML="Loading"+".".repeat(t)}),500),this.container=document.getElementById("game"),ke.init(this.container)}};i("5327");Oe.render=d,Oe.__scopeId="data-v-5e1dd4d8";var qe=Oe,Me={name:"App",components:{Game:qe}};i("bf91");Me.render=o;var De=Me;Object(a["a"])(De).mount("#app")},"7d19":function(e,t,i){},bf91:function(e,t,i){"use strict";i("7d19")}});
//# sourceMappingURL=app.14b9719c.js.map